apiVersion: eksctl.io/v1alpha5
kind: ClusterConfig

metadata:
  name: skills-eks-cluster
  region: ap-northeast-2
  version: "1.29"

vpc:
  id: "<VPC ID>"
  subnets:
    private:
      ap-northeast-2a:
        id: "<SUBNET ID>"
      ap-northeast-2b:
        id: "<SUBNET ID>"

managedNodeGroups:
  - name: skills-ng
    instanceType: m5.large
    desiredCapacity: 2
    volumeSize: 20
    privateNetworking: true
    iam:
      withAddonPolicies:
        imageBuilder: true # Amazon ECR
        albIngress: true # albIngress
        cloudWatch: true # cloudWatch
        autoScaler: true # auto scaling
        ebs: true # EBS CSI Driver

fargateProfiles:
  - name: skills-fargate-profile
    selectors:
      - namespace: default
        labels:
          app: fargate-app
